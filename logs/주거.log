==================================================
주거실거래정보 데이터 로딩 및 기본 정보 확인
==================================================
인코딩 utf-8으로 데이터 로딩 시도...
성공: utf-8 인코딩으로 데이터 로딩 완료

1. 데이터 기본 정보
------------------------------
데이터 형태: (1538030, 22)
컬럼 수: 22
행 수: 1538030

2. 컬럼 정보
------------------------------
컬럼명 목록:
 1. NO
 2. 시군구
 3. 번지
 4. 본번
 5. 부번
 6. 단지명
 7. 전월세구분
 8. 전용면적(㎡)
 9. 계약년월
10. 계약일
11. 보증금(만원)
12. 월세금(만원)
13. 층
14. 건축년도
15. 도로명
16. 계약기간
17. 계약구분
18. 갱신요구권 사용
19. 종전계약 보증금(만원)
20. 종전계약 월세(만원)
21. 주택유형
22. 건물명

3. 데이터 타입 정보
------------------------------
NO                int64
시군구              object
번지               object
본번                int64
부번                int64
단지명              object
전월세구분            object
전용면적(㎡)         float64
계약년월              int64
계약일               int64
보증금(만원)          object
월세금(만원)          object
층                 int64
건축년도              int64
도로명              object
계약기간             object
계약구분             object
갱신요구권 사용         object
종전계약 보증금(만원)     object
종전계약 월세(만원)      object
주택유형             object
건물명              object
dtype: object

4. 첫 5행 데이터 확인
------------------------------
   NO                  시군구     번지   본번  부번             단지명 전월세구분  전용면적(㎡)  \
0   1        서울특별시 성동구 마장동    819  819   0        마장동중앙하이츠    전세   84.800   
1   2        서울특별시 성동구 마장동  782-1  782   1            홀스케슬    전세   28.420   
2   3  경기도 용인시 처인구 남사읍 아곡리    681  681   0  e편한세상용인한숲시티5단지    월세   84.826   
3   4  전북특별자치도 전주시 완산구 태평동    305  305   0          태평아이파크    전세   84.794   
4   5      경기도 수원시 장안구 정자동  313-1  313   1           동신2단지    전세   59.660   

     계약년월  계약일  ...   층  건축년도        도로명           계약기간 계약구분 갱신요구권 사용  \
0  202301   31  ...   1  1999    마장로 262  202301~202404   갱신        -   
1  202301   31  ...   2  2011  마조로18길 25  202302~202502   갱신        -   
2  202301   31  ...  21  2018     한숲로 83  202302~202502   신규        -   
3  202301   31  ...   5  2022     태진로 35  202302~202502   신규        -   
4  202301   31  ...   4  1988    장안로 211  202302~202502   신규        -   

  종전계약 보증금(만원) 종전계약 월세(만원) 주택유형  건물명  
0       46,200         0.0  아파트  NaN  
1       10,000         0.0  아파트  NaN  
2          NaN         NaN  아파트  NaN  
3          NaN         NaN  아파트  NaN  
4          NaN         NaN  아파트  NaN  

[5 rows x 22 columns]

5. 결측치 정보
------------------------------
                결측치 수  결측치 비율(%)
번지                  8   0.000520
단지명            261561  17.006235
종전계약 보증금(만원)  1247807  81.130212
종전계약 월세(만원)   1247807  81.130212
건물명           1276470  82.993830

6. 기본 통계 정보
------------------------------
                 NO            본번            부번       전용면적(㎡)          계약년월  \
count  1.538030e+06  1.538030e+06  1.538030e+06  1.538030e+06  1.538030e+06   
mean   4.622193e+04  8.039826e+02  8.915056e+00  6.465960e+01  2.023064e+05   
std    3.269337e+04  8.489326e+02  5.476399e+01  2.660816e+01  3.479163e+00   
min    1.000000e+00  0.000000e+00  0.000000e+00  7.380000e+00  2.023010e+05   
25%    1.602200e+04  2.980000e+02  0.000000e+00  4.686000e+01  2.023030e+05   
50%    4.228800e+04  6.530000e+02  0.000000e+00  5.997000e+01  2.023060e+05   
75%    7.433100e+04  1.029000e+03  2.000000e+00  8.486570e+01  2.023090e+05   
max    1.249360e+05  7.375000e+03  5.001000e+03  4.191100e+02  2.023120e+05   

                계약일             층          건축년도  
count  1.538030e+06  1.538030e+06  1.538030e+06  
mean   1.559808e+01  9.067398e+00  2.008153e+03  
std    8.572025e+00  7.031995e+00  1.162808e+01  
min    1.000000e+00 -3.000000e+00  1.956000e+03  
25%    8.000000e+00  4.000000e+00  1.998000e+03  
50%    1.500000e+01  7.000000e+00  2.011000e+03  
75%    2.300000e+01  1.300000e+01  2.018000e+03  
max    3.100000e+01  8.300000e+01  2.025000e+03  

7. 메모리 사용량
------------------------------
총 메모리 사용량: 1320.33 MB

8. 데이터 저장
------------------------------
데이터가 housing_data_cleaned.pkl로 저장되었습니다.

데이터 로딩 및 기본 정보 확인 완료!

============================================================
주거실거래정보 데이터 전처리 및 파생 변수 생성
============================================================
데이터 로딩 완료: (1538030, 22)

1. 데이터 전처리 시작
----------------------------------------
보증금(만원) 컬럼 전처리 완료
월세금(만원) 컬럼 전처리 완료
종전계약 보증금(만원) 컬럼 전처리 완료
종전계약 월세(만원) 컬럼 전처리 완료
계약년월 컬럼 전처리 완료
주소 정보 분리 완료

2. 생활비 관련 파생 변수 생성
----------------------------------------
월 주거비 계산 완료
평당 가격 계산 완료
건물 노후도 계산 완료
주거비 수준 분류 완료
지역별 주거비 통계 생성 완료

3. 데이터 품질 확인
----------------------------------------
월_주거비: 이상치 91010개 (5.92%)
전용면적(㎡): 이상치 15012개 (0.98%)
평당_가격: 이상치 80619개 (5.24%)

결측치 현황:
                결측치_수     결측치_비율
건물명           1276470  82.993830
종전계약 월세(만원)   1247807  81.130212
종전계약 보증금(만원)  1247807  81.130212
단지명            261561  17.006235
번지                  8   0.000520
평당_가격               1   0.000065
월_주거비               1   0.000065

5. 전처리된 데이터 저장
----------------------------------------
전처리된 데이터 저장 완료: housing_data_preprocessed.pkl

지역별 통계 저장 완료: region_housing_stats.csv
이상치 분석 결과 저장 완료: outlier_analysis.csv


6. 전처리 요약 정보
----------------------------------------
총 데이터 개수: 1,538,030개
지역별 통계 생성: 218개 지역

============================================================
주거실거래정보 데이터 전처리 및 파생 변수 생성
============================================================
데이터 로딩 완료: (1538030, 22)

1. 데이터 전처리 시작
----------------------------------------
보증금(만원) 컬럼 전처리 완료
월세금(만원) 컬럼 전처리 완료
종전계약 보증금(만원) 컬럼 전처리 완료
종전계약 월세(만원) 컬럼 전처리 완료

계약년월 컬럼 전처리 완료

주소 정보 분리 완료

============================================================
주거실거래정보 탐색적 데이터 분석 (EDA)
============================================================
전처리된 데이터 로딩 완료: (1538030, 34)
지역별 통계 데이터 로딩 완료: (218, 11)

1. 주거비 분포 및 특성 분석
--------------------------------------------------

주거비 분석 차트 표시 완료

주거비 수준별 통계:
         월_주거비                         전용면적(㎡)        건물_노후도        평당_가격  \
         count    mean  median     std    mean median   mean median  mean   
주거비_수준                                                                      
매우비싼    140726  234.27  197.50  119.21   94.28  84.96  15.35   14.0  8.67   
미분류          0     NaN     NaN     NaN   42.84  42.84  33.00   33.0   NaN   
보통      810669   53.75   52.50   13.89   59.81  59.89  15.73   12.0  3.56   
비싼      365958  107.88  105.00   19.62   77.07  84.47  14.97   13.0  5.12   
저렴      220676   20.94   21.25    6.13   43.00  40.92  18.03   17.0  1.85   

               
       median  
주거비_수준         
매우비싼     7.63  
미분류       NaN  
보통       2.91  
비싼       4.69  
저렴       1.66  

2. 지역별 주거비 패턴 분석
--------------------------------------------------
시도별 주거비 통계 (상위 10개):
         시도  월_주거비_count  월_주거비_mean  월_주거비_median  월_주거비_std  전용면적(㎡)_mean  \
8     서울특별시       422434      116.79         87.50     102.46         59.75   
14  제주특별자치도        10756       77.16         59.25      64.02         62.76   
1       경기도       504429       74.42         64.50      47.87         65.95   
5     대구광역시        45947       65.43         57.50      37.36         74.47   
11    인천광역시        92391       63.98         57.50      38.49         66.87   
6     대전광역시        33531       61.96         57.50      33.67         69.67   
7     부산광역시        87999       59.66         50.00      39.25         62.90   
9   세종특별자치시        21561       57.51         55.00      27.26         66.12   
10    울산광역시        18234       57.29         52.50      29.76         70.40   
4     광주광역시        32081       53.59         48.30      30.20         66.44   

    건물_노후도_mean  
8         17.64  
14        13.18  
1         15.34  
5         14.70  
11        17.25  
6         19.37  
7         14.73  
9          8.12  
10        17.22  
4         15.50  

3. 주택유형별 분석
--------------------------------------------------
주택유형별 통계:
    주택유형  월_주거비_count  월_주거비_mean  월_주거비_median  월_주거비_std  전용면적(㎡)_mean  \
0    아파트      1276468       83.17         65.00      72.48         69.11   
1  연립다세대       261561       55.37         49.88      38.59         42.93   

   전용면적(㎡)_median  건물_노후도_mean  건물_노후도_median  평당_가격_mean  평당_가격_median  
0           63.40        15.76           13.0        3.97          3.21  
1           39.83        16.29           12.0        5.03          4.24  

주택유형별 분석 차트 표시 완료

4. 시계열 분석
--------------------------------------------------

시계열 분석 차트 표시 완료

5. 상관관계 분석
--------------------------------------------------

상관관계 분석 차트 표시 완료

상관관계 분석 결과:
월_주거비와 다른 변수들 간의 상관관계:
  평당_가격: 0.675
  보증금(만원): 0.636
  월세금(만원): 0.616
  전용면적(㎡): 0.505
  층: 0.185
  건물_노후도: -0.057

6. 이상치 분석
--------------------------------------------------

이상치 분석 차트 표시 완료

7. 종합 인사이트 도출
--------------------------------------------------
주요 인사이트:
  데이터 규모: 총 1,538,030건의 주거 거래 데이터 분석
  주요 거래 유형: {'전세': 848053, '월세': 689976, '월세 전세금 변환': 1}
  평균 주거비: 78.4만원
  주거비 중위수: 62.5만원
  가장 비싼 지역: 서초구
  가장 저렴한 지역: 세종특별자치시 장군면
  주택유형별 거래량: {'아파트': 1276469, '연립다세대': 261561}
  건물 평균 노후도: 15.8년

8. 분석 결과 요약 저장
-------------------------------------------------
============================================================
생활비 기반 지역 클러스터링 분석
============================================================
데이터 로딩 완료: (1538030, 34)
지역별 통계 데이터 로딩 완료: (218, 11)

1. 클러스터링을 위한 지역별 특성 변수 생성
--------------------------------------------------
클러스터링 특성 변수 생성 완료: (872, 16)
생성된 특성 변수:
  - 전체_시군구
  - 월_주거비_mean
  - 월_주거비_median
  - 월_주거비_std
  - 월_주거비_count
  - 전용면적(㎡)_mean
  - 전용면적(㎡)_median
  - 건물_노후도_mean
  - 건물_노후도_median
  - 평당_가격_mean
  - 평당_가격_median
  - 전세_비율
  - 아파트_비율
  - level_1
  - 주거비_수준
  - 최근거래_비율-

2. 클러스터링 분석을 위한 데이터 전처리
--------------------------------------------------
최소 거래량 100건 이상 지역: 684개
데이터 정규화 완료
3. 최적 클러스터 수 결정
--------------------------------------------------
최적 클러스터 수 (Silhouette Score 기준): 2
최적 Silhouette Score: 0.390
4. K-Means 클러스터링 수행
--------------------------------------------------
클러스터링 완료: 2개 클러스터
클러스터별 지역 수:
  클러스터 0: 544개 지역
  클러스터 1: 140개 지역
5. 클러스터 특성 분석
--------------------------------------------------
클러스터별 평균 특성:
      월_주거비_mean  월_주거비_median  월_주거비_std  전용면적(㎡)_mean  전용면적(㎡)_median  \
클러스터                                                                      
0          47.49         43.86      25.41         64.53           64.19   
1         104.32         89.15      68.06         61.65           59.46   

      건물_노후도_mean  건물_노후도_median  평당_가격_mean  평당_가격_median  전세_비율  아파트_비율  \
클러스터                                                                        
0           14.52          12.82        2.49          2.27  51.33   88.71   
1           17.70          16.86        5.77          5.28  58.30   70.93   

      최근거래_비율  
클러스터           
0       100.0  
1       100.0  

클러스터별 대표 지역 (각 클러스터별 상위 5개 지역):
  클러스터 0: 경기도 화성시, 경기도 화성시, 경기도 화성시, 경기도 화성시, 경기도 수원시
  클러스터 1: 송파구, 송파구, 송파구, 송파구, 경기도 용인시

6. 클러스터링 결과 시각화
--------------------------------------------------

사용 가능한 컬럼: ['전체_시군구', '월_주거비_mean', '월_주거비_median', '월_주거비_std', '월_주거비_count', '전용면적(㎡)_mean', '전용면적(㎡)_median', '건물_노후도_mean', '건물_노후도_median', '평당_가격_mean', '평당_가격_median', '전세_비율', '아파트_비율', 'level_1', '주거비_수준', '최근거래_비율', '클러스터']
실제 사용할 특성: ['월_주거비_mean', '전용면적(㎡)_mean', '건물_노후도_mean', '전세_비율', '아파트_비율', '최근거래_비율']
7. 클러스터 해석 및 명명
--------------------------------------------------
클러스터 명명 및 특성:

클러스터 0: 저비용_아파트중심
  평균_주거비: 47.5만원
  평균_면적: 64.5㎡
  평균_건물나이: 14.5년
  아파트_비율: 88.7%
  고비용_비율: 0.0%
  대표_지역: 경기도 화성시, 경기도 화성시, 경기도 화성시

클러스터 1: 고비용_혼합주거
  평균_주거비: 104.3만원
  평균_면적: 61.7㎡
  평균_건물나이: 17.7년
  아파트_비율: 70.9%
  고비용_비율: 0.0%
  대표_지역: 송파구, 송파구, 송파구

8. 결과 저장
--------------------------------------------------
클러스터링 결과 저장 완료: regional_clusters.csv
클러스터 요약 정보 저장 완료: cluster_summary.csv

클러스터링 분석 결과 저장 완료: clustering_results.json

메인 데이터 로딩 완료: (1538030, 34)
클러스터 데이터 로딩 완료: (684, 18)

1. 예측 모델을 위한 데이터 준비
--------------------------------------------------
클러스터 정보가 있는 데이터: 6,143,704건

모델링용 데이터: 6,143,700건

2. 데이터 전처리
--------------------------------------------------
전월세구분 인코딩 완료 - 2개 카테고리
주택유형 인코딩 완료 - 2개 카테고리
시도 인코딩 완료 - 17개 카테고리
이상치 제거 후 데이터: 5,779,672건

3. 피처와 타겟 분리
--------------------------------------------------
피처 데이터 형태: (5779672, 8)
타겟 데이터 형태: (5779672,)

4. 학습/테스트 데이터 분할
--------------------------------------------------
학습 데이터: (4623737, 8)
테스트 데이터: (1155935, 8)

5. 다양한 모델 학습 및 평가
--------------------------------------------------

Linear Regression 모델 학습 중...
  - 테스트 R²: 0.807
  - 테스트 MAE: 11.29
  - CV R² (평균 ± 표준편차): 0.807 ± 0.000

Ridge Regression 모델 학습 중...
  - 테스트 R²: 0.807
  - 테스트 MAE: 11.29
  - CV R² (평균 ± 표준편차): 0.807 ± 0.000

Lasso Regression 모델 학습 중...
  - 테스트 R²: 0.794
  - 테스트 MAE: 11.55
  - CV R² (평균 ± 표준편차): 0.794 ± 0.000

Decision Tree 모델 학습 중...
  - 테스트 R²: 1.000
  - 테스트 MAE: 0.00
  - CV R² (평균 ± 표준편차): 1.000 ± 0.000

Random Forest 모델 학습 중...
  - 테스트 R²: 1.000
  - 테스트 MAE: 0.00
  - CV R² (평균 ± 표준편차): 1.000 ± 0.000

Gradient Boosting 모델 학습 중...
  - 테스트 R²: 0.997
  - 테스트 MAE: 1.50
  - CV R² (평균 ± 표준편차): 0.997 ± 0.000
6. 모델 성능 비교
--------------------------------------------------
모델 성능 비교:
                  모델  Train R²  Test R²  Test MAE  CV R² Mean  CV R² Std
0  Linear Regression     0.807    0.807    11.289       0.807        0.0
1   Ridge Regression     0.807    0.807    11.289       0.807        0.0
2   Lasso Regression     0.794    0.794    11.553       0.794        0.0
3      Decision Tree     1.000    1.000     0.000       1.000        0.0
4      Random Forest     1.000    1.000     0.003       1.000        0.0
5  Gradient Boosting     0.997    0.997     1.500       0.997        0.0

최고 성능 모델: Decision Tree

7. 최고 모델 상세 분석
--------------------------------------------------
피처 중요도 순위:
  평당_가격: 0.578
  전용면적(㎡): 0.422
  건물_노후도: 0.000
  층: 0.000
  시도: 0.000
  전월세구분: 0.000
  주택유형: 0.000
  클러스터: 0.000

  8. 모델 성능 시각화
--------------------------------------------------
9. 클러스터별 예측 성능 분석
--------------------------------------------------
클러스터별 예측 성능:
      실제값_mean  실제값_std  예측값_mean  예측값_std  오차_mean  오차_std
클러스터                                                       
0.0      56.92    31.34     56.92    31.34      0.0    0.01
1.0      83.17    40.76     83.17    40.76      0.0    0.03
10. 예측 함수 구현
--------------------------------------------------
예측 테스트 결과: 50.0만원
11. 모델 저장
--------------------------------------------------
최고 성능 모델 저장 완료: ../data/best_model.pkl
라벨 인코더 저장 완료: ../data/label_encoders.pkl

모델 정보 저장 완료: model_info.json

12. 결과 요약
--------------------------------------------------
최고 성능 모델: Decision Tree
테스트 R² 점수: 1.000
테스트 MAE: 0.00만원
학습 데이터 크기: 4,623,737건
테스트 데이터 크기: 1,155,935건

생성된 파일:
  - best_model.pkl (학습된 모델)
  - label_encoders.pkl (라벨 인코더)
  - model_info.json (모델 정보)
  - 13_feature_importance.png (피처 중요도)
  - 14_model_performance.png (모델 성능)

생활비 예측 모델 구축 완료!